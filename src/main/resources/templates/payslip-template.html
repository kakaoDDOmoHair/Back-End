<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8" />
    <style>
        /* 1. [핵심 수정] PDF 페이지 크기 및 여백 설정 (A4 기준) */
        @page {
            size: A4;
            margin: 15mm; /* 종이 가장자리 여백 */
        }

        /* 2. 공통 스타일 */
        body {
            font-family: 'Malgun Gothic', sans-serif; /* Java 코드의 폰트명과 일치해야 함 */
            font-size: 11px;
            color: #333;
            line-height: 1.4;
            margin: 0;
            padding: 0;
        }

        /* 3. [핵심 수정] 컨테이너 너비를 100%로 변경하고 box-sizing 추가 */
        .container {
            width: 100%;
            margin: 0 auto;
            padding: 10px;
            border: 1px solid #ccc;
            box-sizing: border-box; /* 패딩 때문에 너비가 늘어나지 않도록 설정 */
        }

        /* 타이틀 영역 */
        .header { text-align: center; margin-bottom: 20px; }
        .title { font-size: 24px; font-weight: bold; text-decoration: underline; margin-bottom: 5px; }
        .period { font-size: 14px; font-weight: bold; }

        /* 테이블 공통 스타일 */
        table {
            width: 100%;
            border-collapse: collapse;
            margin-bottom: 15px;
            table-layout: fixed; /* 칸 너비 고정 */
        }
        th, td {
            border: 1px solid #000;
            padding: 6px;
            text-align: center;
            word-wrap: break-word; /* 긴 텍스트 줄바꿈 */
        }
        .bg-gray { background-color: #f0f0f0; font-weight: bold; }
        .text-left { text-align: left; padding-left: 10px; }
        .text-right { text-align: right; padding-right: 10px; }

        /* 섹션 제목 */
        .section-title { font-weight: bold; font-size: 13px; margin-bottom: 5px; display: block; }

        /* 하단 푸터 */
        .footer { text-align: center; margin-top: 30px; font-size: 14px; }
        .store-name { font-weight: bold; font-size: 18px; margin-top: 10px; }
    </style>
</head>
<body>
<div class="container">
    <div class="header">
        <div class="title">임 금 명 세 서</div>
        <div class="period" th:text="'[' + ${year} + '년 ' + ${month} + '월분]'"></div>
    </div>

    <span class="section-title">■ 인적사항</span>
    <table>
        <col style="width: 15%;" />
        <col style="width: 35%;" />
        <col style="width: 15%;" />
        <col style="width: 35%;" />
        <tr>
            <td class="bg-gray">성 명</td>
            <td th:text="${workerName}"></td>

            <td class="bg-gray">생년월일</td>
            <td th:text="${birthDate}"></td>
        </tr>
        <tr>
            <td class="bg-gray">입사일</td>
            <td th:text="${joinDate}"></td>

            <td class="bg-gray">지급일자</td>
            <td th:text="${#temporals.format(#temporals.createNow(), 'yyyy-MM-dd')}"></td>
        </tr>
    </table>

    <span class="section-title">■ 지급 및 공제내역</span>
    <table>
        <col style="width: 20%;" />
        <col style="width: 30%;" />
        <col style="width: 20%;" />
        <col style="width: 30%;" />
        <tr class="bg-gray">
            <td colspan="2">지급 내역</td>
            <td colspan="2">공제 내역</td>
        </tr>
        <tr class="bg-gray">
            <td>항 목</td>
            <td>금 액</td>
            <td>항 목</td>
            <td>금 액</td>
        </tr>
        <tr>
            <td>기본급</td>
            <td class="text-right" th:text="${#numbers.formatInteger(baseSalary, 1, 'COMMA')}"></td>
            <td>소득세(3.3%)</td>
            <td class="text-right" th:text="${tax > 0 ? #numbers.formatInteger(tax, 1, 'COMMA') : '-'}"></td>
        </tr>
        <tr>
            <td>주휴수당</td>
            <td class="text-right" th:text="${weeklyAllowance > 0 ? #numbers.formatInteger(weeklyAllowance, 1, 'COMMA') : '-'}"></td>
            <td>고용보험</td>
            <td class="text-right">-</td>
        </tr>
        <tr>
            <td>기타수당</td>
            <td class="text-right">-</td>
            <td>지방소득세</td>
            <td class="text-right" th:text="${tax > 0 ? #numbers.formatInteger(tax * 0.1, 1, 'COMMA') : '-'}"></td>
        </tr>
        <tr class="bg-gray">
            <td>지급합계</td>
            <td class="text-right" th:text="${#numbers.formatInteger(totalAmount + tax + (tax * 0.1), 1, 'COMMA')}"></td>
            <td>공제합계</td>
            <td class="text-right" th:text="${#numbers.formatInteger(tax + (tax * 0.1), 1, 'COMMA')}"></td>
        </tr>
        <tr>
            <td colspan="4" class="text-right" style="padding: 15px;">
                <span style="font-weight:bold; margin-right: 20px;">실 수령액 (차인지급액)</span>
                <span style="font-size: 16px; font-weight: bold; text-decoration: underline;"
                      th:text="${#numbers.formatInteger(totalAmount, 1, 'COMMA')} + ' 원'"></span>
            </td>
        </tr>
    </table>

    <span class="section-title">■ 세부 산출내역</span>
    <table>
        <col style="width: 20%;" />
        <col style="width: 50%;" />
        <col style="width: 30%;" />
        <tr class="bg-gray">
            <td>구 분</td>
            <td>산출식 및 계산방법</td>
            <td>산출금액</td>
        </tr>
        <tr>
            <td>기본급</td>
            <td class="text-left">
                <span th:text="${totalHours} + '시간'"></span> ×
                <span th:text="${#numbers.formatInteger(hourlyWage, 1, 'COMMA')} + '원 (시급)'"></span>
            </td>
            <td class="text-right" th:text="${#numbers.formatInteger(baseSalary, 1, 'COMMA')}"></td>
        </tr>
        <tr>
            <td>주휴수당</td>
            <td class="text-left">
                1주 15시간 이상 근무 시 지급 (통상시급 × 8시간)
            </td>
            <td class="text-right" th:text="${weeklyAllowance > 0 ? #numbers.formatInteger(weeklyAllowance, 1, 'COMMA') : '해당없음'}"></td>
        </tr>
        <tr>
            <td>소득세</td>
            <td class="text-left">사업소득세율 3.3% 적용 (소득세 3% + 지방소득세 0.3%)</td>
            <td class="text-right" th:text="${tax > 0 ? #numbers.formatInteger(tax, 1, 'COMMA') : '-'}"></td>
        </tr>
    </table>

    <div class="footer">
        <p>귀하의 노고에 진심으로 감사드립니다.</p>
        <div class="store-name" th:text="${storeName}"></div>
    </div>
</div>
</body>
</html>